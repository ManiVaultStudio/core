<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Splash Screen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="Content-Security-Policy"
      content="default-src 'self' qrc:;
               script-src  'self' 'unsafe-inline' qrc:;
               style-src   'self' 'unsafe-inline';
               font-src    'self' data: qrc:;
               img-src     'self' data:;">
	<link rel="preload" href="qrc:/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>
	<link rel="preload" href="qrc:/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
	<link rel="preload" href="qrc:/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
	<link rel="stylesheet" href="qrc:/webfonts/all.min.css">
    <style>
	
		html, body { height: 100%; margin: 0; }
      
		body {
			min-height: 100vh;
			display: flex;
			flex-direction: column;
			font-family: system-ui, sans-serif;
		}

		div.content {
			flex: 1;
			padding: 50px;
			box-sizing: border-box;
			background: linear-gradient(rgba(255,255,255,.1), rgba(255,255,255,.5)), url("{{BACKGROUND_IMAGE}}") center / cover no-repeat;
		}

		footer.footer {
			margin-top: auto;
			padding: 12px 16px;
			box-sizing: border-box;
		}

		table {
			width: 100%;
			border-collapse: collapse;
		}
	  
		td {
			vertical-align: top;
		}

		p {
			margin: 0 0 0.75em 0;
		}

		p.column {
		}
		
		p.description {
			font-size: 10pt;
			padding-top: 10px;
		}
		
		p.alerts {
			font-size: 10pt;
		}
		
		p.copyright {
			color: grey;
			font-size: 10px;
			padding-top: 20px;
		}
		
		span {
			
		}
		
		span.title {
			color: rgb(102, 159, 178);
			font-size: 20pt;
			font-weight: bold;
			padding-top: 0px;
			padding-bottom: 7px;
		}

		span.version {
			font-size: 9pt;
			font-weight: bold;
			padding-top: 0px;
			padding-bottom: 0px;
		}

		span.subtitle {
			padding-top: 20px;
			padding-bottom: 20px;
			font-size: 9pt;
			font-style: italic;
		}
		  
		.icon {
			font-size: 1em;
			line-height: 1;
			vertical-align: -0.12em;
		}
			
		#progress {
			position: fixed;
			left: 0; right: 0; bottom: 0;
			display: flex;
			align-items: center;
			padding: 4px 8px;
			gap: 8px;
			height: 24px;
			background: rgb(70, 70, 70);
			font-size: 12px;
			z-index: 99999;
		}

		#description {
			flex: 1;
			overflow: hidden;         /* prevent overflow */
			text-overflow: ellipsis;  /* show â€¦ when too long */
			white-space: nowrap;
			color: rgb(220, 220, 220);
			padding-left: 5px;
		}

		.bar-container {
			flex: 0 0 150px;          /* fixed width (adjust as you like) */
			height: 4px;              /* thin bar */
			background: #ddd;
			border-radius: 2px;
			overflow: hidden;
		}
		
		#bar {
			width: 0px;
			height: 100%;
			background: #3b82f6;
			transition: width .2s linear;
			transition: transform .2s linear; /* smooth updates */
			will-change: transform;
		}
  
    </style>
  </head>
  <body>
    <div class="content">
      <table>
        <tr>
          <td style="width:25%;">
			<p class="column">
				{{LOGO}}
			</p>
          </td>
          <td style="width:75%;">
            <p class="column">
              <span class="title">{{TITLE}}</span><br>
              <span class="version">{{VERSION}}</span><br>
              <span class="subtitle">{{SUBTITLE}}</span><br>
            </p>
            <p class="description">{{DESCRIPTION}}</p>
			<p class="alerts">{{ALERTS}}</p>
			<p class="copyright">{{COPYRIGHT}}</p>
          </td>
        </tr>
      </table>
	  <div>
		
	</div>
	<div id="progress" class="progress">
		<div id="description" class="description"></div>
		<div class="bar-container">
			<div id="bar" class="bar"></div>
		</div>
	</div>
    </div>
	<script src="qrc:/qtwebchannel/qwebchannel.js"></script>
	<script>
	  function setProgress(p) {
		document.getElementById('bar').style.width = ((p / 100.0) * 150) + 'px';
	  }
	  
	  function setProgressDescription(progressDescription) {
		document.getElementById('description').textContent = progressDescription;
	  }

	  new QWebChannel(qt.webChannelTransport, function (channel) {
		const bridge = channel.objects.bridge;
		
		bridge.progressChanged.connect(setProgress);
		bridge.progressDescriptionChanged.connect(setProgressDescription);
		
		if (bridge.requestInitial)
			bridge.requestInitial();
	  });
	</script>
  </body>
</html>
